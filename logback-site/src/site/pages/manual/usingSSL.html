<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="content-type" content="text/html; charset=iso-8859-1" />
    <title>Logback: Using SSL</title>
    <link rel="stylesheet" type="text/css" href="../css/common.css" />
    <link rel="stylesheet" type="text/css" href="../css/screen.css" media="screen" />
    <link rel="stylesheet" type="text/css" href="../css/_print.css" media="print" />
    <link rel="stylesheet" type="text/css" href="../css/prettify.css" media="screen" />    

  </head>
  <body onload="prettyPrint()">
    <script type="text/javascript">prefix='../';</script>
    <script type="text/javascript" src="../js/prettify.js"></script>
    <script src="../templates/header.js" type="text/javascript"> </script>
    <div id="left">
      <noscript>Please turn on Javascript to view this menu</noscript>
      <script src="../templates/left.js" type="text/javascript"></script>
    </div>
    <div id="right">
      <script src="menu.js" type="text/javascript"></script>
    </div>
    <div id="content">    
      <h1>Using SSL</h1>
      <p>Logback supports the use of the Secure Sockets Layer (SSL) when
         delivering log events to a remote log server using 
         <a href="../xref/ch/qos/logback/classic/net/SSLSocketAppender.html">
         <code>SSLSocketAppender</code></a>.  The Java Secure Sockets
         Extension (JSSE) and Java Cryptography Architecture (JCA) 
         which is used to implement Logback's SSL support has many configurable 
         options, and a pluggable provider framework that allows the built-in 
         SSL and cryptographic capabilities of the platform to be replaced
         or augmented.  Logback components such as <code>SSLSocketAppender</code>
         provide the ability to fully specify all of the configurable
         aspects of the SSL engine and cryptographic providers, to meet your
         unique security needs.
      </p>
      
      <h2 class="doAnchor">SSL and X.509 Certificates</h2>
      <p>In order to use SSL-enabled Logback components, you will need an
         X.509 credential (a private key, corresponding certificate,
         and CA certification chain) to identify your Logback server.  If 
         you wish to use mutual authentication, you will also need credentials 
         for your Logback clients (such as <code>SSLSocketAppender</code>).  
      </p>      
      <p>You can use almost any valid X.509 credential for your Logback
         server.  While you can use a credential issued by a commercial
         certification authority (CA), you can also use a certificate issued
         from your own internal CA or even a self-signed certificate.  The
         following is all that is required:
      </p> 
      <ol>
        <li>The server must be configured with a key store containing 
            the server's private key, corresponding certificate, and
            CA certification chain (if not using a self-signed certificate).
        </li>
        <li>The client must be configured with a trust store containing
            the trusted root CA certificate(s) or the server's 
            signed root certificate.
        </li>
      </ol>

      <p>TODO: provide some examples of creating key stores and trust stores
         using self-signed certificates.  Meanwhile there are lots of examples
         to be found out there on the web...
      </p>
          
      <h2 class="doAnchor">Configuring Logback Components for SSL</h2>
      <p>Logback components such as 
         <a href="../xref/ch/qos/logback/classic/net/SSLSocketAppender.html">
         <code>SSLSocketAppender</code></a> support a large number of SSL
         configuration properties.  Fortunately, nearly all of the configurable
         properties have reasonable defaults.  In most cases all that is needed
         for an SSL client (such as <code>SSLSocketAppender</code>) is the
         configuration for the <span class="prop">trustStore</span> property,
         which specifies the location, passphrase, and type of the key store
         containing your trusted CA certificate(s).
      </p>
      <p>The remainder of this section describes all of the configuration 
         properties that are available, for those situations in which the
         defaults are not adequate.      
      </p>
      
      <h3 class="doAnchor"><a name="SSLConfiguration"></a>SSL Configuration</h3>
      <p>When configuring a Logback component that supports SSL, you specify
         the SSL configuration using the <code>ssl</code> property.  This
         configuration element corresponds to the 
         <a href="../xref/ch/qos/logback/core/net/ssl/SSLConfiguration.html">
         <code>SSLConfiguration</code></a> class, which supports several 
         configurable properties as shown in the table below.
      </p>
      <table class="bodyTable striped">
        <tr>
          <th>Property Name</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
        <tr>
          <td><span class="prop" container="ssl">keyManagerFactory</span></td>
          <td><a href="../xref/ch/qos/logback/core/net/ssl/KeyManagerFactoryFactoryBean.html">
              <code>KeyManagerFactoryFactoryBean</code></a>
          </td>
          <td>Specifies the configuration used to create a
              <a href="http://docs.oracle.com/javase/1.5.0/docs/api/javax/net/ssl/KeyManagerFactory.html">
              <code>KeyManagerFactory</code></a>.  The Java platform's default 
              factory will be used if this property is not configured.  See
              <a href="#KeyManagerFactoryFactoryBean">Key Manager Factory
              Configuration</a>
              below. 
            </p>
          </td>
        </tr>
        <tr>
          <td><a name="ssl.keyStore"></a><span class="prop" container="ssl">keyStore</span></td>
          <td><a href="../xref/ch/qos/logback/core/net/ssl/KeyStoreFactoryBean.html">
              <code>KeyStoreFactoryBean</code></a>
          </td>
          <td>
            <p>Specifies the configuration used to create a
               <a href="http://docs.oracle.com/javase/1.5.0/docs/api/java/security/KeyStore.html">
               <code>KeyStore</code></a>.  The KeyStore created by this property
               should contain a single X.509 credential (consisting of a 
               private key, corresponding certificate, and CA certificate chain).
               This credential is presented by the local SSL peer to the remote
               SSL peer.
            </p>
            <p>When configuring an SSL client (e.g. <code>SSLSocketAppender</code>),
               the <span class="prop" container="ssl">keyStore</span> property
               is needed only if the remote peer is configured to require
               client authentication. 
            </p>
            <p>When configuring an SSL server (e.g. <code>SimpleSSLSocketServer</code>)
               the <span class="prop" container="ssl">keyStore</span> property
               specifies the key store containing the server's credential.  If
               this property is not configured, the JSSE's
               <code>javax.net.ssl.keyStore</code> system property must be
               configured to provide the location of the server's key store.
               See <a href="http://docs.oracle.com/javase/1.5.0/docs/guide/security/jsse/JSSERefGuide.html#InstallationAndCustomization">
               Customizing JSSE</a> in the 
               <a href="http://docs.oracle.com/javase/1.5.0/docs/guide/security/jsse/JSSERefGuide.html">
               JSSE Reference Guide</a> for more information on setting JSSE
               system properties.
            </p>
            <p>See <a href="#KeyStoreFactoryBean">Key Store Configuration</a>
               below. 
            </p>
          </td>
        </tr>
        <tr>
          <td><span class="prop" container="ssl">parameters</span></td>
          <td><a href="../xref/ch/qos/logback/core/net/ssl/SSLParametersConfiguration.html">
              <code>SSLParametersConfiguration</code></a></td>
          <td>Specifies various parameters used in SSL session negotiation.
              See <a href="#SSLParametersConfiguration">SSL Parameters Configuration</a>
              below.
          </td>
        </tr>
        <tr>
          <td><span class="prop" container="ssl">protocol</span></td>
          <td><code>String</code></td>
          <td>Specifies the SSL protocol that will be used to create an 
              <a href="http://docs.oracle.com/javase/1.5.0/docs/api/javax/net/ssl/SSLContext.html">
              <code>SSLContext</code></a>.
              See the <a href="http://docs.oracle.com/javase/1.5.0/docs/guide/security/jsse/JSSERefGuide.html#AppA">
              Standard Names</a> specification in the 
              <a href="http://docs.oracle.com/javase/1.5.0/docs/guide/security/jsse/JSSERefGuide.html">
              JSSE Reference Guide</a>.  The Java platform's default protocol 
              will be used if this property is not configured.
            </p>
          </td>
        </tr>
        <tr>
          <td><span class="prop" container="ssl">provider</span></td>
          <td><code>String</code></td>
          <td>Specifies the name of the JSSE provider that will be used to
              create an 
              <a href="http://docs.oracle.com/javase/1.5.0/docs/api/javax/net/ssl/SSLContext.html">
              <code>SSLContext</code></a>.  The Java platform's default JSSE 
              provider will be used if this property is not configured.
            </p>
          </td>
        </tr>
        <tr>
          <td><span class="prop" container="ssl">secureRandom</span></td>
          <td><a href="../xref/ch/qos/logback/core/net/ssl/SecureRandomFactoryBean.html">
              <code>SecureRandomFactoryBean</code></a>
          </td>
          <td>Specifies the configuration used to create a
              <a href="http://docs.oracle.com/javase/1.5.0/docs/api/java/security/SecureRandom.html">
              <code>SecureRandom</code></a> &mdash; a secure random number
              generator.  The Java platform's default generator will be used  
              if this property is not configured.  See
              <a href="#SecureRandomFactoryBean">Secure Random Generator
              Configuration</a> below. 
            </p>
          </td>
        </tr>
        <tr>
          <td><span class="prop" container="ssl">trustManagerFactory</span></td>
          <td><a href="../xref/ch/qos/logback/core/net/ssl/TrustManagerFactoryFactoryBean.html">
              <code>TrustManagerFactoryFactoryBean</code></a>
          </td>
          <td>Specifies the configuration used to create a
              <a href="http://docs.oracle.com/javase/1.5.0/docs/api/javax/net/ssl/TrustManagerFactory.html">
              <code>TrustManagerFactory</code></a>.  The Java platform's default 
              factory will be used if this property is not configured.  See
              <a href="#TrustManagerFactoryFactoryBean">Trust Manager Factory</a>
              below. 
            </p>
          </td>
        </tr>
        <tr>
          <td><a name="ssl.trustStore"></a><span class="prop" container="ssl">trustStore</span></td>
          <td><a href="../xref/ch/qos/logback/core/net/ssl/KeyStoreFactoryBean.html">
              <code>KeyStoreFactoryBean</code></a>
          </td>
          <td>
            <p>Specifies the configuration used to create a
               <a href="http://docs.oracle.com/javase/1.5.0/docs/api/java/security/KeyStore.html">
               <code>KeyStore</code></a> used for validating identity of the
               remote SSL peer.  The KeyStore created by this property
               should contain one or more <em>trust anchors</em> &mdash; self-signed
               certificates marked as "trusted" in the keystore.  Typically,
               the trust store contains self-signed CA certificates.  
            </p>
            <p>The trust store specified by this property overrides any trust 
               store specified by the JSSE's <code>javax.net.ssl.trustStore</code> 
               system property and the platform's default trust store.See <a href="http://docs.oracle.com/javase/1.5.0/docs/guide/security/jsse/JSSERefGuide.html#InstallationAndCustomization">
               Customizing JSSE</a> in the 
               <a href="http://docs.oracle.com/javase/1.5.0/docs/guide/security/jsse/JSSERefGuide.html">
               JSSE Reference Guide</a> for more information on setting JSSE
               system properties.
            </p>
          </td>
        </tr>
      </table>
      
       <h3 class="doAnchor"><a name="KeyStoreFactoryBean"></a>
          Key Store Configuration</h3>
          
      <p>The <a href="../xref/ch/qos/logback/core/net/ssl/KeyStoreFactoryBean.html">
         <code>KeyStoreFactoryBean</code></a> specifies the 
         configuration needed to create a 
         <a href="http://docs.oracle.com/javase/1.5.0/docs/api/java/security/KeyStore.html">
         <code>KeyStore</code></a> containing X.509 credentials.  The properties
         of this factory bean can be used in the
         <a href="#ssl.keyStore"><span class="prop" container="ssl">keyStore</span></a> 
         and 
         <a href="#ssl.trustStore"><span class="prop" container="ssl">trustStore</span></a>
         properties of the <a href="#SSLConfiguration">SSL Configuration</a>.
      </p>
 
      <table class="bodyTable striped">
        <tr>
          <th>Property Name</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
        <tr>
          <td><span class="prop" container="keyStore">location</span></td>
          <td><code>String</code></td>
          <td>A URL that specifies the location of the key store.  Use
              a <code>file:</code> URL to specify the location of the
              keystore on a filesystem.  Use a <code>classpath:</code>
              URL to specify a keystore than can be found on the classpath.
              If the URL doesn't specify a scheme, <code>classpath:</code>
              is assumed.</td>
        </tr>
        <tr>
          <td><span class="prop" container="keyStore">passphrase</span></td>
          <td><code>String</code></td>
          <td>Specifies the passphrase needed to access the key store.</td>
        </tr>
        <tr>
          <td><span class="prop" container="keyStore">provider</span></td>
          <td><code>String</code></td>
          <td>Specifies the name of the JCA provider that will be used to
              create a <code>KeyStore</code>.  The Java 
              platform's default key store provider will be used if this 
              property is not configured.
          </td>
        <tr>
          <td><span class="prop" container="keyStore">type</span></td>
          <td><code>String</code></td>
          <td>Specifies the <code>KeyStore</code> type.
              See the <a href="http://docs.oracle.com/javase/1.5.0/docs/guide/security/CryptoSpec.html#AppA">
              Standard Names</a> specification in the 
              <a href="http://docs.oracle.com/javase/1.5.0/docs/guide/security/CryptoSpec.html">
              Java Cryptography Architecture</a> specification.  The Java 
              platform's default key store type will be used  if this property 
              is not configured.
          </td>
        </tr>
        </tr>
      </table>
      
      <h3><a name="KeyManagerFactoryFactoryBean"></a>
          Key Manager Factory Configuration</h3>
          
      <p>The <a href="../xref/ch/qos/logback/core/net/ssl/KeyManagerFactoryFactoryBean.html">
         <code>KeyManagerFactoryFactoryBean</code></a> specifies the 
         configuration needed to create a 
         <a href="http://docs.oracle.com/javase/1.5.0/docs/api/javax/net/ssl/KeyManagerFactory.html">
         <code>KeyManagerFactory</code></a>.  Generally, it isn't necessary
         to explicitly configure the key manager factory, as the platform's
         default factory is adequate for most needs.
      </p>

      <table class="bodyTable striped">
        <tr>
          <th>Property Name</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
        <tr>
          <td><span class="prop" container="keyManagerFactory">algorithm</span></td>
          <td><code>String</code></td>
          <td>Specifies the <code>KeyManagerFactory</code> algorithm name.
              See the <a href="http://docs.oracle.com/javase/1.5.0/docs/guide/security/jsse/JSSERefGuide.html#AppA">
              Standard Names</a> specification in the 
              <a href="http://docs.oracle.com/javase/1.5.0/docs/guide/security/jsse/JSSERefGuide.html">
              JSSE Reference Guide</a>.  The Java platform's default key 
              manager algorithm will be used if this property is not configured.
          </td>
        </tr>
        <tr>
          <td><span class="prop" container="keyManagerFactory">provider</span></td>
          <td><code>String</code></td>
          <td>Specifies the name of the JCA provider that will be used to
              create a <code>SecureRandom</code> generator.  The Java 
              platform's default JSSE provider will be used if this property 
              is not configured.
          </td>
        </tr>
      </table>

      <h3 class="doAnchor"><a name="SecureRandomFactoryBean"></a>
          Secure Random Generator Configuration</h3>
          
      <p>The <a href="../xref/ch/qos/logback/core/net/ssl/SecureRandomFactoryBean.html">
         <code>SecureRandomFactoryBean</code></a> specifies the 
         configuration needed to create a 
         <a href="http://docs.oracle.com/javase/1.5.0/docs/api/java/security/SecureRandom.html">
         <code>SecureRandom</code></a> generator.  Generally, it isn't necessary
         to explicitly configure the secure random generator, as the platform's
         default generator is adequate for most needs.
      </p>
 
      <table class="bodyTable striped">
        <tr>
          <th>Property Name</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
        <tr>
          <td><span class="prop" container="secureRandom">algorithm</span></td>
          <td><code>String</code></td>
          <td>Specifies the <code>SecureRandom</code> algorithm name.
              See the <a href="http://docs.oracle.com/javase/1.5.0/docs/guide/security/CryptoSpec.html#AppA">
              Standard Names</a> specification in the 
              <a href="http://docs.oracle.com/javase/1.5.0/docs/guide/security/CryptoSpec.html">
              Java Cryptography Architecture</a> specification.  The Java 
              platform's default random number generation algorithm will be used 
              if this property is not configured.
          </td>
        </tr>
        <tr>
          <td><span class="prop" container="secureRandom">provider</span></td>
          <td><code>String</code></td>
          <td>Specifies the name of the JCA provider that will be used to
              create a <code>SecureRandom</code> generator.  The Java 
              platform's default JSSE provider will be used if this property 
              is not configured.
          </td>
        </tr>
      </table>
      
      <h3><a name="SSLParametersConfiguration"></a>
          SSL Parameters Configuration</h3>
          
      <p>The <a href="../xref/ch/qos/logback/core/net/ssl/SSLParametersConfiguration.html">
         <code>SSLParametersConfiguration</code></a> allows the customization
         of allowed SSL protocols, cipher suites, and client authentication
         options. 
      </p>

      <table class="bodyTable striped">
        <tr>
          <th>Property Name</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
        <tr>
          <td><span class="prop" container="parameters">excludedCipherSpecs</span></td>
          <td><code>String</code></td>
          <td>
            <p>Specifies a comma-separated list of SSL cipher spec names or
               patterns to disable during session negotation.  This property is 
               used to filter the cipher suites supported by the SSL engine, 
               such that any cipher spec matched by this property is disabled.
            </p>
            <p>Each field in the comma-separated list specified for this 
               property may be a simple string or a regular expression.
            </p>
            <p>See the <a href="http://docs.oracle.com/javase/1.5.0/docs/guide/security/jsse/JSSERefGuide.html#AppA">
              Standard Names</a> specification in the 
              <a href="http://docs.oracle.com/javase/1.5.0/docs/guide/security/jsse/JSSERefGuide.html">
              JSSE Reference Guide</a> for a list of cipher spec names.
            </p>
          </td>
        </tr>
        <tr>
          <td><span class="prop" container="parameters">includedCipherSpecs</span></td>
          <td><code>String</code></td>
          <td>
            <p>Specifies a comma-separated list of SSL cipher spec names or
               patterns to enable during session negotation.  This property is 
               used to filter the cipher suites supported by the SSL engine, 
               such that only those cipher suites matched by this property are 
               enabled.
            </p>
            <p>Each field in the comma-separated list specified for this 
               property may be a simple string or a regular expression.
            </p>
            <p>See the <a href="http://docs.oracle.com/javase/1.5.0/docs/guide/security/jsse/JSSERefGuide.html#AppA">
              Standard Names</a> specification in the 
              <a href="http://docs.oracle.com/javase/1.5.0/docs/guide/security/jsse/JSSERefGuide.html">
              JSSE Reference Guide</a> for a list of cipher spec names.
            </p>
          </td>
        </tr>
        <tr>
          <td><span class="prop" container="parameters">excludedProtocols</span></td>
          <td><code>String</code></td>
          <td>
            <p>Specifies a comma-separated list of SSL protocol names or
               patterns to disable during session negotation.  This property is 
               used to filter the protocols supported by the SSL engine, 
               such that any protocol matched by this property is disabled.
            </p>
            <p>Each field in the comma-separated list specified for this 
               property may be a simple string or a regular expression.
            </p>
            <p>See the <a href="http://docs.oracle.com/javase/1.5.0/docs/guide/security/jsse/JSSERefGuide.html#AppA">
              Standard Names</a> specification in the 
              <a href="http://docs.oracle.com/javase/1.5.0/docs/guide/security/jsse/JSSERefGuide.html">
              JSSE Reference Guide</a> for a list of protocol names.
            </p>
          </td>
        </tr>
        <tr>
          <td><span class="prop" container="parameters">includedProtocols</span></td>
          <td><code>String</code></td>
          <td>
            <p>Specifies a comma-separated list of SSL protocol names or
               patterns to enable during session negotation.  This property is 
               used to filter the protocols supported by the SSL engine, 
               such that only those protocols matched by this property are 
               enabled.
            </p>
            <p>Each field in the comma-separated list specified for this 
               property may be a simple string or a regular expression.
            </p>
            <p>See the <a href="http://docs.oracle.com/javase/1.5.0/docs/guide/security/jsse/JSSERefGuide.html#AppA">
              Standard Names</a> specification in the 
              <a href="http://docs.oracle.com/javase/1.5.0/docs/guide/security/jsse/JSSERefGuide.html">
              JSSE Reference Guide</a> for a list of protocol names.
            </p>
          </td>
        </tr>
        <tr>
          <td><span class="prop" container="parameters">needClientAuth</span></td>
          <td><code>String</code></td>
          <td>
            <p>Specifies a comma-separated list of SSL protocol names or
               patterns to enable during session negotation.  This property is 
               used to filter the protocols supported by the SSL engine, 
               such that only those protocols matched by this property are 
               enabled.
            </p>
            <p>Each field in the comma-separated list specified for this 
               property may be a simple string or a regular expression.
            </p>
            <p>See the <a href="http://docs.oracle.com/javase/1.5.0/docs/guide/security/jsse/JSSERefGuide.html#AppA">
              Standard Names</a> specification in the 
              <a href="http://docs.oracle.com/javase/1.5.0/docs/guide/security/jsse/JSSERefGuide.html">
              JSSE Reference Guide</a> for a list of protocol names.
            </p>
          </td>
        </tr>
      </table>
      
      <h3><a name="TrustManagerFactoryFactoryBean"></a>
          Trust Manager Factory Configuration</h3>
          
      <p>The <a href="../xref/ch/qos/logback/core/net/ssl/TrustManagerFactoryFactoryBean.html">
         <code>TrustManagerFactoryFactoryBean</code></a> specifies the 
         configuration needed to create a 
         <a href="http://docs.oracle.com/javase/1.5.0/docs/api/javax/net/ssl/TrustManagerFactory.html">
         <code>TrustManagerFactory</code></a>.  Generally, it isn't necessary
         to explicitly configure the trust manager factory, as the platform's
         default factory is adequate for most needs.
      </p>

      <table class="bodyTable striped">
        <tr>
          <th>Property Name</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
        <tr>
          <td><span class="prop" container="trustManagerFactory">algorithm</span></td>
          <td><code>String</code></td>
          <td>Specifies the <code>TrustManagerFactory</code> algorithm name.
              See the <a href="http://docs.oracle.com/javase/1.5.0/docs/guide/security/jsse/JSSERefGuide.html#AppA">
              Standard Names</a> specification in the 
              <a href="http://docs.oracle.com/javase/1.5.0/docs/guide/security/jsse/JSSERefGuide.html">
              JSSE Reference Guide</a>.  The Java platform's default key 
              manager algorithm will be used if this property is not configured.
          </td>
        </tr>
        <tr>
          <td><span class="prop" container="trustManagerFactory">provider</span></td>
          <td><code>String</code></td>
          <td>Specifies the name of the JCA provider that will be used to
              create a <code>SecureRandom</code> generator.  The Java 
              platform's default JSSE provider will be used if this property 
              is not configured.
          </td>
        </tr>
      </table>
      
      <h3>Examples</h3>
      <p>TODO</p>

    </div>
  </body>
</html>