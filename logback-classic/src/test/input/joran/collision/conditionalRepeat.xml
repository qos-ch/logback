<!--
  ~ Logback: the reliable, generic, fast and flexible logging framework.
  ~  Copyright (C) 1999-2025, QOS.ch. All rights reserved.
  ~
  ~ This program and the accompanying materials are dual-licensed under
  ~ either the terms of the Eclipse Public License v1.0 as published by
  ~ the Eclipse Foundation
  ~
  ~     or (per the licensee's choosing)
  ~
  ~ under the terms of the GNU Lesser General Public License version 2.1
  ~ as published by the Free Software Foundation.
  -->

<!DOCTYPE configuration>

<configuration debug="false">

    <import class="ch.qos.logback.classic.encoder.PatternLayoutEncoder"/>
    <import class="ch.qos.logback.core.FileAppender"/>


    <!-- test conditional repeat of appenders -->
    <!-- this configuration should not result in a collision error -->
    <!-- note that this configuration does not make sense and is too contrived to be useful -->

    <condition class="ch.qos.logback.core.boolex.IsPropertyDefinedCondition">
        <key>undefinedTestCollisionVar</key>
    </condition>

    <if>
        <then>
            <appender name="FILE1" class="FileAppender">
                <file>${outputTargetKey}</file>
                <encoder class="PatternLayoutEncoder">
                    <pattern>%-4relative [%thread] %-5level %logger{35} -%kvp- %msg%n</pattern>
                </encoder>
            </appender>
            <root>
                <appender-ref ref="FILE1"/>
            </root>
        </then>
        <else>
            <appender name="FILE2" class="FileAppender">
                <file>${outputTargetKey}</file>
                <encoder class="PatternLayoutEncoder">
                    <pattern>%-4relative [%thread] %-5level %logger{35} -%kvp- %msg%n</pattern>
                </encoder>
            </appender>
            <root>
                <appender-ref ref="FILE2"/>
            </root>
        </else>
    </if>

    <root level="DEBUG">
    </root>

</configuration>